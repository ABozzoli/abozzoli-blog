---
import { formatDate, slugify } from "../js/utils";

const { post, hLevel } = Astro.props;
const { title, category, author, date, image, description } = post.data;
const url = `/${post.collection}/${post.slug}/`;
const Heading = hLevel ?? "h2";
---

<article class="post-card card-shadow">
  <a class="card-image" href={url} tabindex="-1" aria-hidden="true">
    <img src={image.src} alt={image.alt} />
  </a>

  <div class="card-content">
    <Heading class="h3"><a href={url}>{title}</a></Heading>
    <p class="ribbon">By <a href={`/author/${slugify(author)}/`}>{author}</a> Â· {formatDate(date)}</p>
    <p class="line-clamp-2">{description}</p>
    <a class="badge" href={`/category/${slugify(category)}/`}>{category}</a>
  </div>
</article>

<style lang="scss">
  .post-card {
    display: grid;
    grid-template-columns: 158px 1fr;
    min-height: 158px;

    img {
      height: 100%;
    }

    .card-content {
      padding: 16px;

      .h3 {
        margin-bottom: 0;
      }

      .ribbon {
        font-size: var(--fs-12px);
      }
    }
  }

  @media (max-width: 768px) {
    .post-card {
      display: initial;

      .card-image {
        display: none;
      }
    }
  }
</style>
